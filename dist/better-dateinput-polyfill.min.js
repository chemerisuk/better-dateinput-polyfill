/**
 * better-dateinput-polyfill: input[type=date] polyfill for better-dom
 * @version 3.3.0 Tue, 24 Mar 2020 11:10:32 GMT
 * @link https://github.com/chemerisuk/better-dateinput-polyfill
 * @copyright 2020 Maksim Chemerisuk
 * @license MIT
 */
!function(){"use strict";function t(t){return[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-")}function e(t){var e=new Date((t||"?")+"T00:00");return isNaN(e.getTime())?null:e}var i="dateinput-picker{display:inline-block;vertical-align:bottom;overflow:hidden;position:absolute;z-index:1000;width:336px;height:320px;max-height:320px;box-shadow:0 8px 24px #888;background:#fff;opacity:1;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);-webkit-transform-origin:0 0;transform-origin:0 0;transition:.1s ease-out}dateinput-picker[aria-hidden=true]{opacity:0;-webkit-transform:skew(-25deg) scaleX(.75);transform:skew(-25deg) scaleX(.75);visibility:hidden;height:0}dateinput-picker[aria-expanded=true]{height:220px;max-height:220px}dateinput-picker+input{color:transparent!important;caret-color:transparent!important}dateinput-picker+input::selection{color:rgba(0,0,0,.01);background:none}dateinput-picker+input::-moz-selection{background:none}",n=DOM.find("html"),a=n.get("lang")||void 0,r="orientation"in window?"mobile":"desktop",s=function(){return"_"!==DOM.create("<input type='date'>").value("_").value()}(),o=DOM.findAll("meta[name^='data-format:']").reduce(function(t,e){var i=e.get("name").split(":")[1].trim(),n=JSON.parse(e.get("content"));if(i)try{t[i]=new window.Intl.DateTimeFormat(a,n)}catch(r){}return t},{});DOM.extend("input[type=date]",{constructor:function(){if(this._isPolyfillEnabled())return!1;var t=this.css(["color","font-size","font-family","font-style","line-height","padding-left","border-left-width","text-indent"]);t.dx=["padding-left","border-left-width","text-indent"].map(function(e){return parseFloat(t[e])}).reduce(function(t,e){return t+e}),t.css=["font-family","font-style","line-height","font-size"].map(function(e){return e+":"+t[e]}).join(";").replace(/"/g,""),this._backgroundTemplate=('<svg xmlns="http://www.w3.org/2000/svg"><text x="'+t.dx+'" y="50%" dy=".35em" fill="'+t.color+'"></text></svg>').replace("></",' style="'+t.css+'"></');var e=DOM.create("<dateinput-picker tabindex='-1'>");e._parentInput=this,this.before(e.hide()),this._picker=e;var i=this._syncDisplayedText.bind(this,"defaultValue"),n=this._syncDisplayedText.bind(this,"value"),a=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");Object.defineProperty(this[0],"value",{configurable:!1,enumerable:!0,get:a.get,set:this._setValue.bind(this,a.set,n)}),Object.defineProperty(this[0],"valueAsDate",{configurable:!1,enumerable:!0,get:this._getValueAsDate.bind(this),set:this._setValueAsDate.bind(this)}),this.on("change",n),this.on("focus",this._focusInput.bind(this)),this.on("blur",this._blurInput.bind(this)),this.on("keydown",["which"],this._keydownInput.bind(this)),this.on("click",this._focusInput.bind(this)),this.closest("form").on("reset",i),i()},_isPolyfillEnabled:function(){var t=this.get("data-polyfill");return"none"===t||(!t||t!==r&&"all"!==t?s:(this.set("type","text"),!1))},_setValue:function(i,n,a){var r=e(a);if(r){var s=new Date((this.get("min")||"?")+"T00:00"),o=new Date((this.get("max")||"?")+"T00:00");r<s?a=t(s):r>o&&(a=t(o))}else a="";i.call(this[0],a),n()},_getValueAsDate:function(){return e(this.value())},_setValueAsDate:function(e){e instanceof Date&&!isNaN(e.getTime())&&this.value(t(e))},_syncDisplayedText:function(t){var i=this.get(t),n=e(i);if(n){var r=this.get("data-format"),s=o[r];try{var l=new Date(n.getFullYear(),n.getMonth(),n.getDate(),12);i=s?s.format(l):l.toLocaleDateString(a,r?JSON.parse(r):{})}catch(h){}}this.css("background-image","url('data:image/svg+xml,"+encodeURIComponent(this._backgroundTemplate.replace("></",">"+i+"</"))+"')")},_keydownInput:function(e){if(13===e&&"true"===this._picker.get("aria-hidden"))return!0;if(32===e)this.get("readonly")||(this._picker.toggleState(!1),this._picker.invalidateState(),"true"===this._picker.get("aria-hidden")?this._picker.show():this._picker.hide());else if(27===e||9===e||13===e)this._picker.hide();else if(8===e||46===e)this.empty().fire("change");else if(17===e)this._picker.toggleState(),this._picker.invalidateState();else{var i;if(74===e||40===e?i=7:75===e||38===e?i=-7:76===e||39===e?i=1:72!==e&&37!==e||(i=-1),i){var n=this.get("valueAsDate")||new Date,a="true"===this._picker.get("aria-expanded");!a||40!==e&&38!==e?!a||37!==e&&39!==e?n.setDate(n.getDate()+i):n.setMonth(n.getMonth()+(i>0?1:-1)):n.setMonth(n.getMonth()+(i>0?4:-4)),this.value(t(n)).fire("change")}}return 9===e},_blurInput:function(){this._picker.hide()},_focusInput:function(){if(this.get("readonly"))return!1;var t=this.offset(),e=this._picker.offset(),i=t.height;n.get("clientHeight")<t.bottom+e.height&&(i=-e.height),this._picker.toggleState(!1),this._picker.invalidateState(),this._picker.css("margin-top",i).show()}}),DOM.importStyles(i)}(),function(){"use strict";function t(t,e){return"string"==typeof e?Array(t+1).join(e):Array.apply(null,Array(t)).map(e).join("")}function e(t,e){return"en-US"===o?t:e}function i(t){var i=new Date;if(i.setDate(i.getDate()-i.getDay()+t+e(0,1)),c)try{return i.toLocaleDateString(o,{weekday:"short"})}catch(n){}return i.toUTCString().split(",")[0].slice(0,2)}function n(t){var e=new Date(25e8*(t+1));if(c)try{return e.toLocaleDateString(o,{month:"short"})}catch(i){}return e.toUTCString().split(" ")[2]}function a(t){var e=new Date(t.getFullYear(),t.getMonth(),12);if(c)try{return e.toLocaleDateString(o,{month:"long",year:"numeric"})}catch(i){}return e.toUTCString().split(" ").slice(2,4).join(" ")}var r="body{overflow:hidden}*{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;line-height:2.5rem;text-align:center;cursor:default;-webkit-user-select:none;-ms-user-select:none;user-select:none;margin:0}a{position:absolute;width:3rem;height:2.5rem}a[rel=prev]{left:0}a[rel=next]{right:0}b{display:block;cursor:pointer}table{width:100%;table-layout:fixed;border-spacing:0;border-collapse:collapse;text-align:center;line-height:2.5rem}table+table{position:absolute;top:2.5rem;left:0;opacity:1;transition:.1s ease-out;background:#fff}table+table td{line-height:3.75rem}table+table[aria-hidden=true]{visibility:hidden!important;opacity:0}td,th{padding:0}thead{background:#ddd;font-size:smaller;font-weight:700}[aria-selected=false],[aria-disabled=true]{color:#888}[aria-selected=true]{box-shadow:inset 0 0 0 1px #888}a:hover,td:hover,[aria-disabled=true],[aria-selected=true]{background-color:#f5f5f5}",s=DOM.find("html"),o=s.get("lang")||void 0,l="orientation"in window?"touchend":"mousedown",h=!!HTMLElement.prototype.attachShadow,c=function(){try{(new Date).toLocaleString("_")}catch(t){return t instanceof RangeError}return!1}(),d='<a rel="prev"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="100%" viewBox="0 0 16 16"><path d="M11.5 14.06L1 8L11.5 1.94z"/></svg></a><a rel="next"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="100%" viewBox="0 0 16 16"><path d="M15 8L4.5 14.06L4.5 1.94z"/></svg></a><b></b><table><thead>'+t(7,function(t,e){return"<th>"+i(e)})+"</thead><tbody>"+t(7,"<tr>"+t(7,"<td>")+"</tr>")+"</tbody></table><table><tbody>"+t(3,function(e,i){return"<tr>"+t(4,function(t,e){return"<td>"+n(4*i+e)})})+"</tbody></table>";DOM.extend("dateinput-picker",{constructor:function(){var t=this;if(h){var e=this[0].attachShadow({mode:"closed"});setTimeout(function(){t._initContent(DOM.constructor(e))},0)}else{var i="ScriptEngineMajorVersion"in window,n=DOM.create("<object type='text/html' width='100%' height='100%'>");i||n.set("data","about:blank"),this.on("load",{capture:!0,once:!0},["target"],function(e){var i=DOM.constructor(e.get("contentDocument"));t._initContent(i.find("body"))}),this.append(n),i&&n.set("data","about:blank")}},_initContent:function(t){t.set("<style>"+r+"</style>"+d),this._calendarDays=t.find("table"),this._calendarMonths=t.find("table+table"),this._calendarCaption=t.find("b"),this._calendarDays.on("picker:invalidate",["detail"],this._invalidateDays.bind(this)),this._calendarMonths.on("picker:invalidate",["detail"],this._invalidateMonths.bind(this)),t.on("picker:invalidate",["detail"],this._invalidateCaption.bind(this)),t.on(l,"a",["currentTarget"],this._clickPickerButton.bind(this)),t.on(l,"td",["target"],this._clickPickerDay.bind(this)),this._calendarCaption.on(l,this._clickCaption.bind(this)),t.on(l,function(){return!1}),this._parentInput.on("change",this.invalidateState.bind(this)),DOM.get("activeElement")===this._parentInput[0]&&this.show()},_invalidateDays:function(t){var i=t.getMonth(),n=t.getDate(),a=t.getFullYear(),r=new Date((this._parentInput.get("min")||"?")+"T00:00"),s=new Date((this._parentInput.get("max")||"?")+"T00:00"),o=new Date(a,i,1);o.setDate(1-o.getDay()-e(1,0===o.getDay()?7:0)),this._calendarDays.findAll("td").forEach(function(t){o.setDate(o.getDate()+1);var e=i-o.getMonth(),l=null,h=null;a!==o.getFullYear()&&(e*=-1),o<r||o>s?h="true":e>0||e<0?l="false":n===o.getDate()&&(l="true"),t._ts=o.getTime(),t.set("aria-selected",l),t.set("aria-disabled",h),t.value(o.getDate())})},_invalidateMonths:function(t){var e=t.getMonth(),i=t.getFullYear(),n=new Date((this._parentInput.get("min")||"?")+"T00:00"),a=new Date((this._parentInput.get("max")||"?")+"T00:00"),r=new Date(i,e,1);this._calendarMonths.findAll("td").forEach(function(t,i){r.setMonth(i);var s=e-r.getMonth(),o=null;r<n||r>a?o="false":s||(o="true"),t._ts=r.getTime(),t.set("aria-selected",o)})},_invalidateCaption:function(t){var e=t.getFullYear();"true"!==this.get("aria-expanded")&&(e=a(t)),this._calendarCaption.value(e)},_clickCaption:function(){this.toggleState(),this.invalidateState()},_clickPickerButton:function(t){var e="next"===t.get("rel")?1:-1,i=this._parentInput.get("valueAsDate")||new Date;"true"===this.get("aria-expanded")?i.setFullYear(i.getFullYear()+e):i.setMonth(i.getMonth()+e),this._parentInput.set("valueAsDate",i).fire("change")},_clickPickerDay:function(t){var e;"true"===this.get("aria-expanded")?(e=isNaN(t._ts)?new Date:new Date(t._ts),this.toggleState(!1)):isNaN(t._ts)||(e=new Date(t._ts),this.hide()),null!=e&&this._parentInput.set("valueAsDate",e).fire("change")},toggleState:function(t){"boolean"!=typeof t&&(t="true"!==this.get("aria-expanded")),this.set("aria-expanded",t)},invalidateState:function(){var t="true"===this.get("aria-expanded"),e=t?this._calendarMonths:this._calendarDays,i=this._parentInput.get("valueAsDate")||new Date;e.fire("picker:invalidate",i),t?this._calendarMonths.show():this._calendarMonths.hide()}})}();